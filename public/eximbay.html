<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eximbay Payment</title>
    <script src="https://pay-test.eximbay.com/js/v1/payment.js"></script>
</head>
<body>
<div style="text-align: center; padding: 20px;">
    <h2>결제 진행 중...</h2>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const fgkey = urlParams.get('fgkey');

    function initPayment() {
        try {
            console.log('Payment initialization started');
            console.log('fgkey:', fgkey);

            const eximbay = new Object();
            eximbay.fgkey = fgkey;
            eximbay.payment_type = "PAY";

            if (typeof window.EximbayPayment === 'undefined') {
                console.error('EximbayPayment is not defined');
                setTimeout(initPayment, 1000);
                return;
            }

            window.EximbayPayment(eximbay);
        } catch (e) {
            console.error('Payment initialization failed:', e);
        }
    }

    window.onload = function() {
        console.log('Window loaded');
        setTimeout(initPayment, 1000);
    }
</script>
</body>
</html>